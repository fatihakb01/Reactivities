# Setup Guide for Reactivities

This guide explains how to run **Reactivities** locally with all required dependencies for both backend and frontend.

## 1. Prerequisites

Before running the project, make sure you have the following installed:

- [Node.js](https://nodejs.org/) >= 22 (comes with `npm`)
- [.NET 9 SDK](https://dotnet.microsoft.com/download/dotnet/9.0)
- [Docker Desktop](https://www.docker.com/products/docker-desktop/) (for SQL Server)
- [SQL Server Management Studio (SSMS)](https://learn.microsoft.com/en-us/sql/ssms/download-sql-server-management-studio-ssms) *(optional, to inspect DB)*

## 2. Clone Repository

```bash
git clone https://github.com/fatihakb01/Reactivities.git

cd Reactivities
```

## 3. Database (SQL Server in Docker)

The app uses SQL Server running in a Docker container.

Start the container:
```bash
docker-compose up -d
```

This runs SQL Server on `127.0.0.1:1433`.

Default credentials:
- User: `SA`
- Password: `Password@1`

## 4. Backend Setup (ASP.NET Core)

**4.1 Navigate to the API project**

```bash
cd API
```

**4.2 Create `appsettings.json`**

```json

{
  "Logging": {
    "LogLevel": {
      "Default": "Information",
      "Microsoft.AspNetCore": "Warning"
    }
  },
  "CloudinarySettings": {
    "CloudName": "your-cloud",
    "ApiKey": "your-key",
    "ApiSecret": "your-secret"
  },
  "Resend": {
    "ApiToken": "your-token"
  },
  "AllowedHosts": "*"
}
```

**4.3 Install NuGet dependencies**

Run:
```bash
dotnet restore
```

Dependencies are already in API.csproj, so dotnet restore will install them automatically.

**4.4 Apply EF Core migrations**
```bash
dotnet ef database update -p Persistence -s API
```
This will create the schema in the SQL Server DB.

**4.5 Run backend**
```bash
dotnet run
```

Backend will run at: https://localhost:5001

## 5. Frontend Setup (React + TypeScript)

**5.1 Navigate to client project**
```bash
cd client
```

**5.2 Create .env.development file**

This file is used to configure environment variables for the frontend during development. Create a file named `.env.development` in the client directory with the following content:

```
VITE_API_URL=https://localhost:5001/api
VITE_COMMENTS_URL=https://localhost:5001/comments
VITE_LOCATIONIQ_KEY=your_location_iq_key
```

**5.3 Install npm dependencies**
```bash
npm install
```

Navigate to the `package.json` to see all the dependencies.

**5.4 Run frontend**
```bash
npm run dev
```

Frontend will run at: https://localhost:3000

The frontend is configured to run over HTTPS using a self-signed certificate generated by Vite.
This is required so that secure HTTP-only cookies from the backend (JWT authentication) work properly.
- When you first run the frontend (npm run dev), you may receive a security warning about the certificate.
- Simply proceed/accept the risk to continue (this happens because the certificate is self-signed, not trusted by default).
- If you want to disable HTTPS for debugging, you can edit vite.config.ts:
```ts
export default defineConfig({
  server: {
    https: false
  }
})
```
Important: For authentication flows (login, JWT cookies, etc.), HTTPS must remain enabled. Only disable for debugging UI issues.
